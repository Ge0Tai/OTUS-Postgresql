## Домашнее задание № 6 (MVCC, vacuum и autovacuum)

1. <b>VACUUM</b>
 >очистка обрабатывает таблицу полностью. Она вычищает не только ненужные версии строк, но и ссылки на них из всех индексов.
Обработка происходит параллельно с другой активностью в системе. Таблица и индексы при этом могут использоваться обычным образом и для чтения, и для изменения (однако одновременное выполнение таких команд, как CREATE INDEX, ALTER TABLE и некоторых других будет невозможно).  
В таблице просматриваются только те страницы, в которых происходила какая-то активность. Для этого используется карта видимости (напомню, что в ней отмечены страницы, содержащие только достаточно старые версии строк, которые гарантированно видимы во всех снимках данных). Обрабатываются только страницы, не отмеченные в карте, а сама карта при этом обновляется.


1. Применим параметры к кластеру, указанные в задании:

 ![](pics/dz6/1_set_config_dwh.png)
 
2. Создаём объекты <b>pgbench</b> для тестирования:
 
 `pgbench -i postgres -U postgres`
 
 ![](pics/dz6/1_create_schema_pgbench.png)
 
3. Прогон теста (без настроек Vacuum):

 `pgbench -c8 -P 60 -T 3600 -U postgres postgres`
 
![](pics/dz6/2_first_test.png) 



### Ссылки:
